

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Changelog &mdash; phpcassa v1.0.a.6 documentation</title>
    <link rel="stylesheet" href="static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '1.0.a.6',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="static/jquery.js"></script>
    <script type="text/javascript" src="static/underscore.js"></script>
    <script type="text/javascript" src="static/doctools.js"></script>
    <link rel="top" title="phpcassa v1.0.a.6 documentation" href="index.html" />
    <link rel="prev" title="Troubleshooting" href="troubleshooting.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="troubleshooting.html" title="Troubleshooting"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">phpcassa v1.0.a.6 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Changelog</a><ul>
<li><a class="reference internal" href="#changes-in-1-0-a-6">Changes in 1.0.a.6</a><ul>
<li><a class="reference internal" href="#features">Features</a></li>
<li><a class="reference internal" href="#bugfixes">Bugfixes</a></li>
<li><a class="reference internal" href="#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-1-0-a-5">Changes in 1.0.a.5</a><ul>
<li><a class="reference internal" href="#id1">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-1-0-a-4">Changes in 1.0.a.4</a><ul>
<li><a class="reference internal" href="#id2">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-1-0-a-3">Changes in 1.0.a.3</a><ul>
<li><a class="reference internal" href="#id3">Features</a></li>
<li><a class="reference internal" href="#id4">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-1-0-a-2">Changes in 1.0.a.2</a><ul>
<li><a class="reference internal" href="#id5">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-1-0-a-1">Changes in 1.0.a.1</a></li>
<li><a class="reference internal" href="#changes-in-0-8-a-2">Changes in 0.8.a.2</a><ul>
<li><a class="reference internal" href="#id6">Features</a></li>
<li><a class="reference internal" href="#id7">Bugfixes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-0-8-a-1">Changes in 0.8.a.1</a><ul>
<li><a class="reference internal" href="#id8">Features</a></li>
<li><a class="reference internal" href="#id9">Bugfixes</a></li>
<li><a class="reference internal" href="#deprecated">Deprecated</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-0-7-a-4">Changes in 0.7.a.4</a><ul>
<li><a class="reference internal" href="#id10">Bugfixes</a></li>
<li><a class="reference internal" href="#id11">Features</a></li>
<li><a class="reference internal" href="#id12">Deprecated</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-0-7-a-3">Changes in 0.7.a.3</a><ul>
<li><a class="reference internal" href="#id13">Bugfixes</a></li>
<li><a class="reference internal" href="#id14">Features</a></li>
<li><a class="reference internal" href="#id15">Deprecated</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-0-7-a-2">Changes in 0.7.a.2</a><ul>
<li><a class="reference internal" href="#id16">Bugfixes</a></li>
<li><a class="reference internal" href="#id17">Features</a></li>
<li><a class="reference internal" href="#id18">Deprecated</a></li>
</ul>
</li>
<li><a class="reference internal" href="#changes-in-0-7-a1">Changes in 0.7.a1</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="troubleshooting.html"
                        title="previous chapter">Troubleshooting</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="sources/changelog.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="changelog">
<h1>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h1>
<div class="section" id="changes-in-1-0-a-6">
<h2>Changes in 1.0.a.6<a class="headerlink" href="#changes-in-1-0-a-6" title="Permalink to this headline">¶</a></h2>
<p>This release adds a couple of minor features and primarily
fixes bugs related to estrict warnings and creating and altering
keyspaces.  It should be entirely compatible with the previous
release of phpcassa.</p>
<div class="section" id="features">
<h3>Features<a class="headerlink" href="#features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Accept a map of key =&gt; ttl for the $ttl parameter in
ColumnFamily.batch_insert()</li>
<li>Add ColumnFamily.get_range_by_token()</li>
</ul>
</div>
<div class="section" id="bugfixes">
<h3>Bugfixes<a class="headerlink" href="#bugfixes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Create deletion predicate correctly in remove_super_column()</li>
<li>Always apply all supplied attributes to KsDefs when creating
keyspaces through SystemManager()</li>
<li>Fix estrict warnings related to subclassing</li>
<li>Fix alter_keyspace(), which was failing to clear cf_defs from
the KsDef</li>
</ul>
</div>
<div class="section" id="miscellaneous">
<h3>Miscellaneous<a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add composer.json file</li>
<li>Integration with Travis CI</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-1-0-a-5">
<h2>Changes in 1.0.a.5<a class="headerlink" href="#changes-in-1-0-a-5" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release, with yet another important fix related to packing.
In this case, FloatType and DoubleType data were being store in little-endian
format, while Cassandra expects big-endian format.  If you are only using
phpcassa, you might not have noticed this, but if you were also using other
clients, you could get some unexpected values.</p>
<p>This release only reads and writes FloatType and DoubleType values in the
correct, big-endian format, so any values writting in the old little-endian
format will not be read correctly. If you need help migrating the old values
to the new format, please let me know, and I can help you write a quick
migration script.</p>
<div class="section" id="id1">
<h3>Bugfixes<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Store FloatType and DoubleType in big-endian format</li>
<li>Handle serialized keys in batch_insert() with DICTIONARY_FORMAT
correctly</li>
<li>Don&#8217;t limit get_count(), multiget_count() to 100 by default</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-1-0-a-4">
<h2>Changes in 1.0.a.4<a class="headerlink" href="#changes-in-1-0-a-4" title="Permalink to this headline">¶</a></h2>
<p>This is a bugfix release, with the most important fix affecting some negative
values when using IntegerType (Int32Type and LongType were not affected).</p>
<p>This bug basically affected half of all negative integers. In particular, the
ones where the top byte would have a leading 1 bit if it were (abs($value) - 1).
So, -129 through -256, -32769 through -65536, etc would be packed incorrectly.</p>
<p>If you are only reading negative IntegerType values with phpcassa, this fix
does not affect you.</p>
<div class="section" id="id2">
<h3>Bugfixes<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix bad packing of some negative IntegerType values</li>
<li>Pack IndexExpression values correctly when using a non-string comparator</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-1-0-a-3">
<h2>Changes in 1.0.a.3<a class="headerlink" href="#changes-in-1-0-a-3" title="Permalink to this headline">¶</a></h2>
<p>This is primarily a bug fix release, with most of the bugs
affecting get_range() and get_indexed_slices().</p>
<div class="section" id="id3">
<h3>Features<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Int32Type support (4 byte signed integers)</li>
<li>DateType support (millisecond precision timestamps)</li>
<li>SystemManager::alter_column() has been added, allowing you to easily
set a single column validator</li>
</ul>
</div>
<div class="section" id="id4">
<h3>Bugfixes<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Avoid potential stack overflow from recursing too deep while skipping
tombstones in get_range() and get_indexed_slices()</li>
<li>Use correct namespace for UUIDException in UUID.php</li>
<li>Fix paging in get_range() and get_indexed_slices() for column families
that have non-string key validation classes</li>
<li>Handle row count of 1 for get_range() and get_indexed_slices() correctly</li>
<li>Fix packing and unpacking of validated columns on column familes with
non-string column names</li>
<li>Allow creation and dropping of indexes on non-string column names</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-1-0-a-2">
<h2>Changes in 1.0.a.2<a class="headerlink" href="#changes-in-1-0-a-2" title="Permalink to this headline">¶</a></h2>
<p>This addresses a few bugs in the 1.0.a.2 release only.</p>
<div class="section" id="id5">
<h3>Bugfixes<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix autoloading issues in older versions of PHP 5.3</li>
<li>Fix ConsistencyLevel reference in BatchMutator</li>
<li>Fix BooleanType unpacking</li>
<li>Fix Thrift C extension for PHP 5.4</li>
<li>Add php5-dev, g++ to debian build dependencies</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-1-0-a-1">
<h2>Changes in 1.0.a.1<a class="headerlink" href="#changes-in-1-0-a-1" title="Permalink to this headline">¶</a></h2>
<p>This release introduces several major changes to phpcassa:</p>
<ul class="simple">
<li>PHP namespaces are now used for phpcassa and thrift classes</li>
<li>Many classes or functions that were once part of columnfamily.php
are now in their own classes and modules</li>
<li>An autoload.php file has been added for bootstrapping the autoloader
for phpcassa and Thrift classes; this <em>must</em> be used for imports to
work correctly</li>
<li>Full batch operation support has been added</li>
<li>CompositeType support has been added</li>
<li>Alternate formats for inserting and fetching data may now
be used</li>
<li>Super column families should be handled with the new phpcassaSuperColumnFamily
class. Any $super_column parameters have been removed from methods
in ColumnFamily.</li>
<li>Parameters related to column slices are now handled by a single ColumnSlice
parameter; in most cases, parameter order has changed slightly for these
methods, so check the documentation carefully</li>
<li>FloatType, DoubleType, and BooleanType are now supported</li>
<li>Thrift has been upgraded to 0.8.0</li>
</ul>
<p>To help make the upgrade process easier and to demonstrate some of the new
features, an examples/ directory has been created with full, working
examples.</p>
<p>Additionally, test coverage has been greatly improved, so a few miscellaneous
bugs have likely been resolved recently.</p>
</div>
<div class="section" id="changes-in-0-8-a-2">
<h2>Changes in 0.8.a.2<a class="headerlink" href="#changes-in-0-8-a-2" title="Permalink to this headline">¶</a></h2>
<p>This release upgrades the bundled version of Thrift
to 0.7.0, which fixes several issues with 32bit
environments.</p>
<div class="section" id="id6">
<h3>Features<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add drop_index() to SystemManager</li>
<li>Order multiget_count() results by the order of the input
keys</li>
<li>Allow for overriding the ConnectionPool error_log mechanism
for custom error handling</li>
</ul>
</div>
<div class="section" id="id7">
<h3>Bugfixes<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Handle multiget() requests with responses that are
larger than $buffer_size correctly</li>
<li>Don&#8217;t ignore the $pool_size parameter in the ConnectionPool
constructor</li>
<li>Pass data intended for UTF8Type values unaltered to Thrift.
This fixes issues with corruption of some utf8 data, but the
user is now responsible for ensuring the data is encoded
correctly.</li>
<li>Fix corruption of timestamps in 32bit environments by
upgrading to Thrift 0.7.0</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-0-8-a-1">
<h2>Changes in 0.8.a.1<a class="headerlink" href="#changes-in-0-8-a-1" title="Permalink to this headline">¶</a></h2>
<p>This release adds support for Cassandra 0.8. This release is
backwards compatible with Cassandra 0.7, and supports a cluster
with a mixture of nodes running 0.7 and 0.8.</p>
<div class="section" id="id8">
<h3>Features<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added ColumnFamily.add() and remove_counter() to work with 0.8
counters.</li>
<li>Support for the 0.8 column family attribute key_validation_class.
Keys may now be automatically packed and upacked, similar to column
names and values.</li>
<li>Addition of sysmanager.php and the SystemManager class. This class
makes it much easier to dynamically create, alter, and drop keyspaces,
column families, and secondary indexes.</li>
<li>New ConnectionPools are no longer automatically filled upon creation.
The method ConnectionPool.fill() was added as an alternative way to
supply this functionality.</li>
</ul>
</div>
<div class="section" id="id9">
<h3>Bugfixes<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Handle NotFoundException and other Exceptions cleanly in ConnectionPool.
Previously, these could result in a slow drain of connections from the
pool.</li>
<li>The default ColumnFamily buffer_size has been lowered from 8096 to 1024.</li>
</ul>
</div>
<div class="section" id="deprecated">
<h3>Deprecated<a class="headerlink" href="#deprecated" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The ColumnFamily constructor arguments $autopack_names and $autopack_values
are deprecated. Use set_autopack_names() and
set_autopack_values() after creating the ColumnFamily instead.</li>
<li>The ColumnFamily constructor argument $buffer_size has been deprecated.
The public attribute $buffer_size should be set instead.</li>
<li>The ColumnFamily constructor arguments $read_consistency_level
and $write_consistency_level have been deprecated.
The public attributes of the same names should be set instead. Both
attributes still default to ConsistencyLevel ONE.</li>
<li>The ConnectionPool constructor argument $framed_transport is deprecated;
framed transport will be assumed in later versions.</li>
<li>The ConnectionPool constructor argument $max_retries is deprecated;
adjust the public attribue of the same name instead.</li>
<li>The ConnectionPool constructor argument $recycle is deprecated;
adjust the public attribue of the same name instead.</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-0-7-a-4">
<h2>Changes in 0.7.a.4<a class="headerlink" href="#changes-in-0-7-a-4" title="Permalink to this headline">¶</a></h2>
<p>The bundled Thrift library has been updated to a post-0.6 trunk
version.  An important bugfix was made in Thrift which greatly
improves performance.</p>
<div class="section" id="id10">
<h3>Bugfixes<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Credentials were not properly passed through Thrift, causing
any authorization attempts to fail.</li>
</ul>
</div>
<div class="section" id="id11">
<h3>Features<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Added the ConnectionPool class to connection.php. This allows
for better failover and loadbalancing of operations. See the
documentation for the ConnectionPool class when upgrading from
0.7.a.3 or earlier.</li>
</ul>
</div>
<div class="section" id="id12">
<h3>Deprecated<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The Connection class in connection.php has been replaced by
ConnectionPool and is now deprecated.</li>
</ul>
</div>
</div>
<div class="section" id="changes-in-0-7-a-3">
<h2>Changes in 0.7.a.3<a class="headerlink" href="#changes-in-0-7-a-3" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id13">
<h3>Bugfixes<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Typo in throwing IncompatibleAPIException</li>
<li>remove() on super column families did not pack names correctly</li>
<li>CassandraUtil::uuid3() param name should be $node not $null</li>
</ul>
</div>
<div class="section" id="id14">
<h3>Features<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Use remove() Thrift API call instead of batch_mutate() when possible</li>
<li>Allow a microsecond timestamp to be passed in for v1 UUID creation</li>
<li>Log connection errors with error_log()</li>
</ul>
</div>
<div class="section" id="id15">
<h3>Deprecated<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>None</p>
</div>
</div>
<div class="section" id="changes-in-0-7-a-2">
<h2>Changes in 0.7.a.2<a class="headerlink" href="#changes-in-0-7-a-2" title="Permalink to this headline">¶</a></h2>
<div class="section" id="id16">
<h3>Bugfixes<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Fix server revival bug</li>
<li>Remove print statement from Connection on connection failure</li>
</ul>
</div>
<div class="section" id="id17">
<h3>Features<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Add an import() method for UUIDs to CassandraUtil to convert binary UUID
representations back into UUID objects</li>
</ul>
</div>
<div class="section" id="id18">
<h3>Deprecated<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h3>
<p>None</p>
</div>
</div>
<div class="section" id="changes-in-0-7-a1">
<h2>Changes in 0.7.a1<a class="headerlink" href="#changes-in-0-7-a1" title="Permalink to this headline">¶</a></h2>
<p>Initial release</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="troubleshooting.html" title="Troubleshooting"
             >previous</a> |</li>
        <li><a href="index.html">phpcassa v1.0.a.6 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>